@if (Resources != null)
{
    var subtypes = Resources.GroupBy(r => r.SubType.Name).OrderBy(r => r.Key);
    @if (subtypes.Count() == 1)
    {
        <MudGrid Spacing="1" Justify="Justify.Center">
            @foreach (var resource in Resources)
            {
                <ResourceCard Resource="resource" OnLoad=@(async () => await OnLoad.InvokeAsync(resource)) />
            }
        </MudGrid>
    }
    else
    {
        <MudExpansionPanels>
            @foreach (var subtype in subtypes)
            {
                <MudExpansionPanel Text="@subtype.Key">
                    <MudGrid Spacing="1" Justify="Justify.Center">
                        @foreach (var file in subtype)
                        {
                            <ResourceCard Resource="file" OnLoad=@(async () => await OnLoad.InvokeAsync(file)) />
                        }
                    </MudGrid>
                </MudExpansionPanel>
            }
        </MudExpansionPanels>
    }
}

@code {
    [Parameter] public List<LocalResource> Resources { get; set; }
    [Parameter] public EventCallback<LocalResource> OnLoad { get; set; }
}
